{% extends "opanel/layout.twig" %}

{% block content %}
<div class="container-xl mt-4">
  <h2 class="mb-3">🔧 權限名稱校正工具（GPT 批次轉換）</h2>

  {% for msg in flash.getMessage('info') %}
    <div class="alert alert-info">{{ msg }}</div>
  {% endfor %}

  <div class="card mb-4">
    <div class="card-header">
      <h3 class="card-title">1️⃣ 原始權限資料（複製貼給 GPT）</h3>
    </div>
    <div class="card-body">
      <textarea class="form-control" rows="12" readonly>{{ permissions | json_encode(constant('JSON_PRETTY_PRINT') b-or constant('JSON_UNESCAPED_UNICODE')) }}
</textarea>
    </div>
  </div>

  <form method="POST">
    <div class="card mb-4">
      <div class="card-header">
        <h3 class="card-title">2️⃣ 貼上 GPT 校正後 JSON（僅修改 name 欄位）</h3>
      </div>
      <div class="card-body">
        <textarea class="form-control" name="json" rows="12" required placeholder='[{"code":"xxx", "name":"中文名稱"}]'></textarea>
      </div>
      <div class="card-footer text-end">
        <button type="submit" class="btn btn-primary">🚀 更新權限名稱</button>
      </div>
    </div>
  </form>
</div>
{% endblock %}
